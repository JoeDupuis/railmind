// hogan.js@3.0.2 downloaded from https://ga.jspm.io/npm:hogan.js@3.0.2/lib/hogan.js

import t from"./template.js";var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var n={};(function(t){var n=/\S/,r=/\"/g,a=/\n/g,i=/\r/g,s=/\\/g,l=/\u2028/,c=/\u2029/;t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12};t.scan=function scan(e,r){var a=e.length,i=0,s=1,l=2,c=i,o=null,u=null,f="",g=[],p=false,h=0,d=0,v="{{",m="}}";function addBuf(){if(f.length>0){g.push({tag:"_t",text:new String(f)});f=""}}function lineIsWhitespace(){var e=true;for(var r=d;r<g.length;r++){e=t.tags[g[r].tag]<t.tags["_v"]||"_t"==g[r].tag&&null===g[r].text.match(n);if(!e)return false}return e}function filterLine(t,e){addBuf();if(t&&lineIsWhitespace()){for(var n=d,r;n<g.length;n++)if(g[n].text){(r=g[n+1])&&">"==r.tag&&(r.indent=g[n].text.toString());g.splice(n,1)}}else e||g.push({tag:"\n"});p=false;d=g.length}function changeDelimiters(t,e){var n="="+m,r=t.indexOf(n,e),a=trim(t.substring(t.indexOf("=",e)+1,r)).split(" ");v=a[0];m=a[a.length-1];return r+n.length-1}if(r){r=r.split(" ");v=r[0];m=r[1]}for(h=0;h<a;h++)if(c==i)if(tagChange(v,e,h)){--h;addBuf();c=s}else"\n"==e.charAt(h)?filterLine(p):f+=e.charAt(h);else if(c==s){h+=v.length-1;u=t.tags[e.charAt(h+1)];o=u?e.charAt(h+1):"_v";if("="==o){h=changeDelimiters(e,h);c=i}else{u&&h++;c=l}p=h}else if(tagChange(m,e,h)){g.push({tag:o,n:trim(f),otag:v,ctag:m,i:"/"==o?p-v.length:h+m.length});f="";h+=m.length-1;c=i;"{"==o&&("}}"==m?h++:cleanTripleStache(g[g.length-1]))}else f+=e.charAt(h);filterLine(p,true);return g};function cleanTripleStache(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function trim(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function tagChange(t,e,n){if(e.charAt(n)!=t.charAt(0))return false;for(var r=1,a=t.length;r<a;r++)if(e.charAt(n+r)!=t.charAt(r))return false;return true}var o={_t:true,"\n":true,$:true,"/":true};function buildTree(e,n,r,a){var i=[],s=null,l=null,c=null;l=r[r.length-1];while(e.length>0){c=e.shift();if(l&&"<"==l.tag&&!(c.tag in o))throw new Error("Illegal content in < super tag.");if(t.tags[c.tag]<=t.tags["$"]||isOpener(c,a)){r.push(c);c.nodes=buildTree(e,c.tag,r,a)}else{if("/"==c.tag){if(0===r.length)throw new Error("Closing tag without opener: /"+c.n);s=r.pop();if(c.n!=s.n&&!isCloser(c.n,s.n,a))throw new Error("Nesting error: "+s.n+" vs. "+c.n);s.end=c.i;return i}"\n"==c.tag&&(c.last=0==e.length||"\n"==e[0].tag)}i.push(c)}if(r.length>0)throw new Error("missing closing tag: "+r.pop().n);return i}function isOpener(t,e){for(var n=0,r=e.length;n<r;n++)if(e[n].o==t.n){t.tag="#";return true}}function isCloser(t,e,n){for(var r=0,a=n.length;r<a;r++)if(n[r].c==t&&n[r].o==e)return true}function stringifySubstitutions(t){var e=[];for(var n in t)e.push('"'+esc(n)+'": function(c,p,t,i) {'+t[n]+"}");return"{ "+e.join(",")+" }"}function stringifyPartials(t){var e=[];for(var n in t.partials)e.push('"'+esc(n)+'":{name:"'+esc(t.partials[n].name)+'", '+stringifyPartials(t.partials[n])+"}");return"partials: {"+e.join(",")+"}, subs: "+stringifySubstitutions(t.subs)}t.stringify=function(e,n,r){return"{code: function (c,p,i) { "+t.wrapMain(e.code)+" },"+stringifyPartials(e)+"}"};var u=0;t.generate=function(e,n,r){u=0;var a={code:"",subs:{},partials:{}};t.walk(e,a);return r.asString?this.stringify(a,n,r):this.makeTemplate(a,n,r)};t.wrapMain=function(t){return'var t=this;t.b(i=i||"");'+t+"return t.fl();"};t.template=t.Template;t.makeTemplate=function(t,n,r){var a=this.makePartials(t);a.code=new Function("c","p","i",this.wrapMain(t.code));return new(this||e).template(a,n,this||e,r)};t.makePartials=function(t){var e,n={subs:{},partials:t.partials,name:t.name};for(e in n.partials)n.partials[e]=this.makePartials(n.partials[e]);for(e in t.subs)n.subs[e]=new Function("c","p","t","i",t.subs[e]);return n};function esc(t){return t.replace(s,"\\\\").replace(r,'\\"').replace(a,"\\n").replace(i,"\\r").replace(l,"\\u2028").replace(c,"\\u2029")}function chooseMethod(t){return~t.indexOf(".")?"d":"f"}function createPartial(t,e){var n="<"+(e.prefix||"");var r=n+t.n+u++;e.partials[r]={name:t.n,partials:{}};e.code+='t.b(t.rp("'+esc(r)+'",c,p,"'+(t.indent||"")+'"));';return r}t.codegen={"#":function(e,n){n.code+="if(t.s(t."+chooseMethod(e.n)+'("'+esc(e.n)+'",c,p,1),'+"c,p,0,"+e.i+","+e.end+',"'+e.otag+" "+e.ctag+'")){'+"t.rs(c,p,"+"function(c,p,t){";t.walk(e.nodes,n);n.code+="});c.pop();}"},"^":function(e,n){n.code+="if(!t.s(t."+chooseMethod(e.n)+'("'+esc(e.n)+'",c,p,1),c,p,1,0,0,"")){';t.walk(e.nodes,n);n.code+="};"},">":createPartial,"<":function(e,n){var r={partials:{},code:"",subs:{},inPartial:true};t.walk(e.nodes,r);var a=n.partials[createPartial(e,n)];a.subs=r.subs;a.partials=r.partials},$:function(e,n){var r={subs:{},code:"",partials:n.partials,prefix:e.n};t.walk(e.nodes,r);n.subs[e.n]=r.code;n.inPartial||(n.code+='t.sub("'+esc(e.n)+'",c,p,i);')},"\n":function(t,e){e.code+=write('"\\n"'+(t.last?"":" + i"))},_v:function(t,e){e.code+="t.b(t.v(t."+chooseMethod(t.n)+'("'+esc(t.n)+'",c,p,0)));'},_t:function(t,e){e.code+=write('"'+esc(t.text)+'"')},"{":tripleStache,"&":tripleStache};function tripleStache(t,e){e.code+="t.b(t.t(t."+chooseMethod(t.n)+'("'+esc(t.n)+'",c,p,0)));'}function write(t){return"t.b("+t+");"}t.walk=function(e,n){var r;for(var a=0,i=e.length;a<i;a++){r=t.codegen[e[a].tag];r&&r(e[a],n)}return n};t.parse=function(t,e,n){n=n||{};return buildTree(t,"",[],n.sectionTags||[])};t.cache={};t.cacheKey=function(t,e){return[t,!!e.asString,!!e.disableLambda,e.delimiters,!!e.modelGet].join("||")};t.compile=function(n,r){r=r||{};var a=t.cacheKey(n,r);var i=(this||e).cache[a];if(i){var s=i.partials;for(var l in s)delete s[l].instance;return i}i=this.generate(this.parse(this.scan(n,r.delimiters),n,r),n,r);return(this||e).cache[a]=i}})(n);var r={};var a=n;a.Template=t.Template;a.template=a.Template;r=a;var i=r;export default i;

