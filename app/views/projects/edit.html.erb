<h1>Edit Project</h1>

<%= form_with(model: @project) do |form| %>
  <%= form_errors(@project) %>

  <div>
    <%= form.label :name %><br>
    <%= form.text_field :name %>
  </div>

  <div>
    <%= form.label :description %><br>
    <%= form.text_area :description %>
  </div>

  <div>
    <%= form.label :repository_url %><br>
    <%= form.text_field :repository_url, placeholder: "Optional: Git repository URL to clone" %>
  </div>

  <div>
    <%= form.label :repo_path %><br>
    <%= form.text_field :repo_path, placeholder: "Leave blank for /workspace, or specify subdirectory" %>
  </div>

  <div>
    <%= form.label :setup_script %><br>
    <%= form.text_area :setup_script %>
  </div>

  <div>
    <%= form.label :dev_dockerfile, "Development Dockerfile" %><br>
    <%= form.text_area :dev_dockerfile, rows: 10, placeholder: "# Optional: Custom Dockerfile for development containers" %>
    <small class="form-help">Define a custom Dockerfile for development containers spawned from tasks</small>
  </div>

  <div>
    <%= form.label :dev_container_port, "Container Port" %><br>
    <%= form.number_field :dev_container_port, placeholder: "3000" %>
    <small class="form-help">Port to expose from the development container (default: 3000)</small>
  </div>

  <div>
    <%= form.label :secrets, "Secrets (JSON)" %><br>
    <%= text_area_tag "project[secrets]", "", placeholder: '{"ENV_VAR": "value", "API_KEY": "secret"}', rows: 3 %>
    <small class="form-help">JSON format. Leave empty to keep existing secrets. Values are encrypted and hidden after saving.</small>
  </div>

  <div>
    <%= form.submit %>
  </div>
<% end %>

<%= link_to 'Show', @project %> |
<%= link_to 'Back', projects_path %>